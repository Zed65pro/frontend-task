<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: Form/Form.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: Form/Form.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React, { useState } from "react";
import "./Form.css";
import Button from "../UI/Button/Button";
import FormInput from "./FormInput/FormInput";
import {
  useTasks,
  useUpdateTasks,
  useSelectedTask,
  useSetSelectedTask,
} from "../context/task-context";

/**
 * Form component
 * @component
 * @param {Object} props
 * @param {Function} props.isCreateTaskHandler
 * @param {boolean} props.isCreate
 * @returns {JSX.Element}
 */
const Form = (props) => {
  /**
   * @typedef {React.Context&lt;any>} setSelectedTask
   * @const
   */
  const setSelectedTask = useSetSelectedTask();
  /**
   * @typedef {React.Context&lt;any>} selectedTask
   * @const
   */
  const selectedTask = useSelectedTask();
  /**
   * @typedef {React.Context&lt;any>} tasks
   * @const
   */
  const tasks = useTasks();
  /**
   * @typedef {React.Context&lt;any>} setTasks
   * @const
   */
  const setTasks = useUpdateTasks();

  /**
   * React useState reference state - state for the values in the inputs of the form
   * @typedef {Object} values
   * @property {number} values.id
   * @property {string} values.projectName
   * @property {string} values.taskName
   * @property {string} values.status
   * @const
   */

  /**
   * React useState state setter - setter function for the values in the form
   * @callback setValues
   * @param {values} state
   * @function
   * @returns {void}
   */
  const [values, setValues] = useState({
    id: selectedTask ? selectedTask.id : "",
    projectName: selectedTask ? selectedTask.projectName : "",
    taskName: selectedTask ? selectedTask.taskName : "",
    status: selectedTask ? selectedTask.status : "",
  });

  /**
   * Array for the types of inputs which are in the form with their properties and validation patterns
   * @const
   * @typedef {Object[]} inputs
   */
  const inputs = [
    {
      id: 1,
      name: "id",
      type: "number",
      placeholder: "Id",
      errorMessage: "Id should be a number",
      label: "Id",
      pattern: "^[0-9]{1,16}$",
      required: true,
    },
    {
      id: 2,
      name: "projectName",
      type: "text",
      placeholder: "project name",
      errorMessage: "This field cannot be left empty.",
      label: "Project name",
      pattern: "^[A-Za-z0-9]{1,16}$",
      required: true,
    },
    {
      id: 3,
      name: "taskName",
      type: "text",
      placeholder: "Task name",
      errorMessage: "This field cannot be left empty.",
      pattern: "^[A-Za-z0-9]{1,16}$",
      label: "Task name",
      required: true,
    },
    {
      id: 4,
      name: "status",
      type: "text",
      placeholder: "Status",
      errorMessage: "You must choose a status for the task.",
      label: "Status",
      pattern: "inactive" || "active" || "inprogress",
      required: true,
    },
  ];

  /**
   * Sets the values from the input upon inputing
   * @typedef {Function} onChange
   * @param {HTMLElement} e
   * @function
   * @returns {void}
   */
  const onChange = (e) => {
    setValues({ ...values, [e.target.name]: e.target.value });
  };
  /**
   * Updates the task upon clicking on the update button
   * @typedef {Function} updateTaskHandler
   * @returns {void}
   * @function
   */
  const updateTaskHandler = () => {
    const index = tasks.indexOf(selectedTask);

    tasks[index] = {
      id: values.id,
      projectName: values.projectName,
      taskName: values.taskName,
      status: values.status,
    };

    setTasks(tasks);
    setSelectedTask(null);
  };

  /**
   * Creates a new task by clicking on the create task button
   * @typedef {Function} createTaskHandler
   * @param {HTMLElement} e
   * @function
   * @returns {void}
   */
  const createTaskHandler = (e) => {
    e.preventDefault();

    const newTask = {
      id: values.id,
      projectName: values.projectName,
      taskName: values.taskName,
      status: values.status,
    };
    tasks.push(newTask);
    setTasks(tasks);

    props.isCreateTaskHandler();
  };
  /**
   * Deletes a task upon clicking on the delete task button
   * @typedef {Function} deleteTaskHandler
   * @returns {void}
   * @function
   */
  const deleteTaskHandler = () => {
    const index = tasks.indexOf(selectedTask);
    tasks.splice(index, 1);
    setTasks(tasks);

    setSelectedTask(null);
  };
  return (
    &lt;div className="modal">
      &lt;form
        onSubmit={props.isCreate ? createTaskHandler : updateTaskHandler}
        className="form"
      >
        &lt;h1 className="title">
          {props.isCreate ? "Create Task" : "Update Task"}
        &lt;/h1>
        {inputs.map((input) => (
          &lt;FormInput
            key={input.id}
            {...input}
            value={values[input.name]}
            onChange={onChange}
          />
        ))}
        {props.isCreate ? (
          &lt;div className="buttons-create">
            &lt;Button type="submit">Create Task&lt;/Button>
            &lt;Button onClick={props.isCreateTaskHandler}>Close form&lt;/Button>
          &lt;/div>
        ) : (
          &lt;div className="buttons-manage">
            &lt;Button type="submit" className="update">
              Update Task
            &lt;/Button>
            &lt;Button onClick={deleteTaskHandler} className="delete">
              Delete Task
            &lt;/Button>
            &lt;Button
              onClick={() => {
                setSelectedTask(null);
              }}
            >
              Close form
            &lt;/Button>
          &lt;/div>
        )}
      &lt;/form>
    &lt;/div>
  );
};

export default Form;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#Body">Body</a></li><li><a href="global.html#Button">Button</a></li><li><a href="global.html#createTaskHandler">createTaskHandler</a></li><li><a href="global.html#deleteTaskHandler">deleteTaskHandler</a></li><li><a href="global.html#focused">focused</a></li><li><a href="global.html#Form">Form</a></li><li><a href="global.html#FormInput">FormInput</a></li><li><a href="global.html#handleFocus">handleFocus</a></li><li><a href="global.html#highlight">highlight</a></li><li><a href="global.html#isClickedHandler">isClickedHandler</a></li><li><a href="global.html#isCreateTask">isCreateTask</a></li><li><a href="global.html#isCreateTaskHandler">isCreateTaskHandler</a></li><li><a href="global.html#isShowTasks">isShowTasks</a></li><li><a href="global.html#mapTasks">mapTasks</a></li><li><a href="global.html#onChange">onChange</a></li><li><a href="global.html#setFocused">setFocused</a></li><li><a href="global.html#setIsCreateTask">setIsCreateTask</a></li><li><a href="global.html#setIsShowTasks">setIsShowTasks</a></li><li><a href="global.html#setSelectedTask">setSelectedTask</a></li><li><a href="global.html#setTasks">setTasks</a></li><li><a href="global.html#setValues">setValues</a></li><li><a href="global.html#showTaskHandler">showTaskHandler</a></li><li><a href="global.html#Task">Task</a></li><li><a href="global.html#TaskList">TaskList</a></li><li><a href="global.html#TaskProvider">TaskProvider</a></li><li><a href="global.html#tasks">tasks</a></li><li><a href="global.html#updateTaskHandler">updateTaskHandler</a></li><li><a href="global.html#useSelectedTask">useSelectedTask</a></li><li><a href="global.html#useSetSelectedTask">useSetSelectedTask</a></li><li><a href="global.html#useTasks">useTasks</a></li><li><a href="global.html#useUpdateTasks">useUpdateTasks</a></li><li><a href="global.html#values">values</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.10</a> on Tue Jul 19 2022 00:12:50 GMT+0300 (GMT+03:00)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
